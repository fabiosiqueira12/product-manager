{% import "forms.twig" as forms %}

<form class="mb-3 custom-form form-search-new" data-url="consumidores/search" enctype="multipart/form-data">
    {% if user_logged().isAdmin() == false %}
        <input type="hidden" name="id_empresa" value="{{company_logged().getId()}}">
    {% endif %}
    {% if user_logged().isAdmin() or user_logged().isSuporte() %}
        <input type="hidden" name="with_comprou" value="1">
    {% endif %}
    <div class="box mb-2">
        <div class="box-block bg-white">
            <div class="row">
                <div class="col-md-6 col-xs-12 form-group">
                    {{forms.label('Buscar por: nome')}}
                    <input type="text" name="search" class="form-control">
                </div>
                <div class="col-md-3 col-xs-12 form-group">
                    {{forms.label('Status:')}}
                    <select name="status" class="form-control">
                        <option value="">-- Todos --</option>
                        <option value="1">Ativo</option>
                        <option value="0">Bloqueado</option>
                    </select>
                </div>
                <div class="col-md-3 col-xs-12 form-group">
                    {{forms.label('Tem Email:')}}
                    <select name="with_email" class="form-control">
                        <option value=""> -- Todos --</option>
                        <option value="0">Não</option>
                        <option value="1">Sim</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 col-xs-12 form-group">
                    {{forms.label('Celular:')}}
                    <input type="text" class="form-control mask-telefone" name="celular">
                </div>
                <div class="col-md-4 col-sm-6 col-xs-12 form-group">
                    {{forms.label('DT/Inicial')}}
                    <input type="date" class="form-control" name="date_insert">
                </div>
                <div class="col-md-4 col-sm-6 col-xs-12 form-group">
                    {{forms.label('DT/Final')}}
                    <input type="date" class="form-control" name="date_final">
                </div>
            </div>
            {% if user_logged().isAdmin() or user_logged().isSuporte() %}
                <div class="row">
                    <div class="col-md-3 col-xs-12 form-group">
                        {{forms.label('Ordernar:')}}
                        <select name="order_by" class="form-control">
                            <option value="">Padrão</option>
                            <option value="a.id ASC">Ref Crescente</option>
                            <option value="a.id DESC">Ref Decrescente</option>
                            <option value="a.nome ASC">Nome Crescente</option>
                            <option value="a.nome DESC">Nome Decrescente</option>
                            <option value="a.date_obs DESC">Data Obs Decrescente</option>
                            <option value="a.date_obs ASC">Data Obs Crescente</option>
                        </select>
                    </div>
                    <div class="col-md-3 col-xs-12 form-group">
                        {{forms.label("Tem Observação:")}}
                        <select name="with_obs" class="form-control">
                            <option value="">-- Todos --</option>
                            <option value="1">Sim</option>
                            <option value="2">Não</option>
                        </select>
                    </div>
                    <div class="col-md-3 col-xs-12 form-group">
                        {{forms.label('Observação:')}}
                        <select name="obs_id" class="form-control">
                            <option value="">-- Todos --</option>
                            {% for obs in observacoes %}
                                <option value="{{obs.id}}">{{obs.title}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-3 col-xs-12 form-group">
                        {{forms.label('Aceita receber novidades:')}}
                        <select name="receber_email" class="form-control text-uppercase">
                            <option value="">-- Todos --</option>
                            <option value="1">Aceitou</option>
                            <option value="99">Não Aceitou</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 col-xs-12 form-group">
                        {{forms.label("Data inicial Obs:")}}
                        <input type="date" class="form-control" name="date_inicial_obs">
                    </div>
                    <div class="col-md-6 col-xs-12 form-group">
                        {{forms.label("Data final Obs:")}}
                        <input type="date" class="form-control" name="date_final_obs">
                    </div>
                </div>
                <div class="form-group">
                    {{forms.label("Selecione uma filial:")}}
                    <select name="id_empresa" class="form-control" id="choices-single-default">
                        <option value="">--TODAS --</option>
                        {% for item in companies %}
                            <option value="{{item.getId()}}">{{item.getTitulo()|upper}}</option>
                        {% endfor %}
                    </select>
                </div>
            {% endif %}
        </div>
        <div class="card-footer text-xs-right" style="display:flex;align-items:center;flex-wrap: wrap;">
            <div class="btn-group" style="margin-right: auto">
                <button onclick="openPrint();" type="button" style="margin-right: auto" class="btn btn-info label-left">
                    <div class="btn-label">
                        <i class="ti-printer"></i>
                    </div>
                    Imprimir busca
                </button>
                {% if user_logged().isAdmin() %}
                    <button type="button" onclick="openExport();" class="btn btn-info ml-1 label-left">
                        <div class="btn-label">
                            <i class="ti-export"></i>
                        </div>
                        Exportar Busca (Excel)
                    </button>
                {% endif %}
            </div>
            <button type="submit" class="btn btn-primary label-left">
                <div class="btn-label">
                    <i class="ti-filter"></i>
                </div>
                Filtrar
            </button>
        </div>
    </div>
</form>